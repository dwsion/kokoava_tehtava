<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Kokoava tehtävä</title>
        <!-- Favicon-->
        <link rel="icon" type="image/x-icon" href="favicon.ico" />
        <!-- Bootstrap Icons-->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet" />
        <!-- Google fonts-->
        <link href="https://fonts.googleapis.com/css?family=Merriweather+Sans:400,700" rel="stylesheet" />
        <link href="https://fonts.googleapis.com/css?family=Merriweather:400,300,300italic,400italic,700,700italic" rel="stylesheet" type="text/css" />
        <!-- SimpleLightbox plugin CSS-->
        <link href="https://cdnjs.cloudflare.com/ajax/libs/SimpleLightbox/2.1.0/simpleLightbox.min.css" rel="stylesheet" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="styles.css" rel="stylesheet" />
        <style>
            body {
                background-color: #343a40;
                color: white;
                font-family: Arial, sans-serif;
                
                transform-origin: top left; /* Skalaa vasemmasta yläkulmasta */
            }input[type="submit"] {
            padding: 10px 20px;
            font-size: 21px;
            background-color: #4e4caf;
            color: white;
            border: none;
            cursor: pointer;
        }.weatherContainer {
            margin-top: 20px;
            text-align: center;
        }
        .weatherItem {
            display: flex; /* Käytetään flexboxia laatikoissa */
            border: 1px solid #131010;
            background-color: rgb(69, 179, 59);
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 5px 8px rgba(95, 80, 80, 0.1);
        }
        .imageContainer {
            margin-right: 30px;
        }
        .imageContainer img {
            max-width: 500px; /* Säädetään kuvan maksimileveys */
            border-radius: 5px; /* Kulmat pyöristetään */
        }
        .weatherInfo {
            flex: 1; /* Täyttää jäljelle jäävän tilan */
            text-align: left; /* Vasemmalle perustuva teksti */
        }
            
        </style>
    </head>


    <body id="page-top">
        <!-- Navigation-->
        <nav class="navbar navbar-expand-lg navbar-light fixed-top py-3" id="mainNav">
            <div class="container px-4 px-lg-5">
                <a class="navbar-brand" href="#page-top">Matkakärpänen</a>
                <button class="navbar-toggler navbar-toggler-right" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
                <div class="collapse navbar-collapse" id="navbarResponsive">
                    <ul class="navbar-nav ms-auto my-2 my-lg-0">
                        <li class="nav-item"><a class="nav-link" href="#masthead">Synkkä syksy</a></li>
                        <li class="nav-item"><a class="nav-link" href="#lippuvisa">Lippuvisa</a></li>
                        <li class="nav-item"><a class="nav-link" href="#sää">Sääennuste</a></li>
                    
                    </ul>
                </div>
            </div>
        </nav>
        <!-- Masthead-->
        <header class="masthead" id="masthead">
            <div class="container px-4 px-lg-5 h-100">
                <div class="row gx-4 gx-lg-5 h-100 align-items-center justify-content-center text-center">
                    <div class="col-lg-8 align-self-end">
                        <h1 class="text-white font-weight-bold">Joko sinulla on matkakuumetta näin syksyn sateiden ja kylmien ilmojen aikoina?</p></p>Jos vastasit ei, niin kohta voi olla</h1>
                        <hr class="divider" />
                    </div>
                    <div class="col-lg-8 align-self-baseline">
                        <p class="text-white-75 mb-5">Pelaa lippuvisaa ja kun kiva kohde löytyy, niin voit tarkistaa samalla sen maan säätiedot</p>
                        <a class="btn btn-primary btn-xl" href="#lippuvisa">PELAA TÄSTÄ</a>
                    </div>
                </div>
            </div>
        </header>
        
        
        <!-- Lippuvisa-osio -->
    <section class="custom-style" id="lippuvisa">
        <div class="container">
            <h1 class="my-4 text-center">Arvaa maan lippu!</h1>
            <div id="quiz-section" class="text-center">
                <div id="flag-box" class="card mb-4">
                    <div class="card-body">
                        <img id="flag-img" src="" alt="Maan lippu" class="img-fluid">
                    </div>
                </div>
                <input type="text" id="country-input" class="form-control my-3" placeholder="Syötä maan nimi (suomeksi)">
                <button id="submit-btn" class="btn btn-primary">Lähetä vastaus</button>
                <button id="dont-know-btn" class="btn btn-secondary ms-2">Näytä oikea vastaus</button>
                <button id="new-flag-btn" class="btn btn-info ms-2">Uusi lippu</button>
                <div id="result" class="mt-4"></div>
                <div id="score" class="mt-4"></div>
            </div>

            <!-- Maan tiedot ja kartta -->
            <div id="country-info" class="text-left">
                <h5 id="country-name" class="mb-3"></h5>
                <ul id="country-details"></ul>
                <div id="map"></div>
            </div>

            <!-- Kuvakaruselli -->
            <div id="carouselContainer" class="mt-4">
                <div id="carouselExample" class="carousel slide" data-bs-ride="carousel">
                    <div class="carousel-inner" id="carousel-images"></div>
                    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample" data-bs-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Edellinen</span>
                    </button>
                    <button class="carousel-control-next" type="button" data-bs-target="#carouselExample" data-bs-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Seuraava</span>
                    </button>
                </div>
            </div>
        </div>
    </section>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAzT5np300YGQSuTeeQML_Mi20S51tAR0k" async defer></script>

    <script>
        let countryData = [];
        let correctCountry = '';
        let correctCountryInFinnish = '';
        let score = 0;

        const countryTranslations = {
            "Finland": "Suomi",
            "Sweden": "Ruotsi",
            "Norway": "Norja",
            "Denmark": "Tanska",
            "Germany": "Saksa",
            "France": "Ranska",
            "Italy": "Italia",
            "Spain": "Espanja",
            "Japan": "Japani",
            "United States": "Yhdysvallat",
            "Canada": "Kanada",
            "Afghanistan": "Afganistan",
            "Albania": "Albania",
            "Algeria": "Algeria",
            "Andorra": "Andorra",
            "Angola": "Angola",
            "Antigua and Barbuda": "Antigua ja Barbuda",
            "Argentina": "Argentiina",
            "Armenia": "Armenia",
            "Australia": "Australia",
            "Austria": "Itävalta",
            "Azerbaijan": "Azerbaidžan",
            "Bahamas": "Bahama",
            "Bahrain": "Bahrain",
            "Bangladesh": "Bangladesh",
            "Barbados": "Barbados",
            "Belarus": "Valko-Venäjä",
            "Belgium": "Belgia",
            "Belize": "Belize",
            "Benin": "Benin",
            "Bhutan": "Bhutan",
            "Bolivia": "Bolivia",
            "Bosnia and Herzegovina": "Bosnia ja Hertsegovina",
            "Botswana": "Botswana",
            "Brazil": "Brasilia",
            "Brunei": "Brunei",
            "Bulgaria": "Bulgaria",
            "Burkina Faso": "Burkina Faso",
            "Burundi": "Burundi",
            "Cabo Verde": "Kap Verde",
            "Cambodia": "Kambodža",
            "Cameroon": "Kamerun",
            "Central African Republic": "Keski-Afrikan tasavalta",
            "Chad": "Tšad",
            "Chile": "Chile",
            "China": "Kiina",
            "Colombia": "Kolumbia",
            "Comoros": "Komorit",
            "Congo (Congo-Brazzaville)": "Kongon tasavalta",
            "Congo (Congo-Kinshasa)": "Kongon demokraattinen tasavalta",
            "Costa Rica": "Costa Rica",
            "Croatia": "Kroatia",
            "Cuba": "Kuuba",
            "Cyprus": "Kypros",
            "Czech Republic (Czechia)": "Tšekki",
            "Djibouti": "Djibouti",
            "Dominica": "Dominica",
            "Dominican Republic": "Dominikaaninen tasavalta",
            "Ecuador": "Ecuador",
            "Egypt": "Egypti",
            "El Salvador": "El Salvador",
            "Equatorial Guinea": "Päiväntasaajan Guinea",
            "Eritrea": "Eritrea",
            "Estonia": "Viro",
            "Eswatini": "Eswatini (Swazimaa)",
            "Ethiopia": "Etiopia",
            "Fiji": "Fidži",
            "Gabon": "Gabon",
            "Gambia": "Gambia",
            "Georgia": "Georgia",
            "Ghana": "Ghana",
            "Greece": "Kreikka",
            "Grenada": "Grenada",
            "Guatemala": "Guatemala",
            "Guinea": "Guinea",
            "Guinea-Bissau": "Guinea-Bissau",
            "Guyana": "Guyana",
            "Haiti": "Haiti",
            "Honduras": "Honduras",
            "Hungary": "Unkari",
            "Iceland": "Islanti",
            "India": "Intia",
            "Indonesia": "Indonesia",
            "Iran": "Iran",
            "Iraq": "Irak",
            "Ireland": "Irlanti",
            "Israel": "Israel",
            "Jamaica": "Jamaika",
            "Jordan": "Jordania",
            "Kazakhstan": "Kazakstan",
            "Kenya": "Kenia",
            "Kiribati": "Kiribati",
            "Kuwait": "Kuwait",
            "Kyrgyzstan": "Kirgisia",
            "Laos": "Laos",
            "Latvia": "Latvia",
            "Lebanon": "Libanon",
            "Lesotho": "Lesotho",
            "Liberia": "Liberia",
            "Libya": "Libya",
            "Liechtenstein": "Liechtenstein",
            "Lithuania": "Liettua",
            "Luxembourg": "Luxemburg",
            "Madagascar": "Madagaskar",
            "Malawi": "Malawi",
            "Malaysia": "Malesia",
            "Maldives": "Malediivit",
            "Mali": "Mali",
            "Malta": "Malta",
            "Marshall Islands": "Marshallinsaaret",
            "Mauritania": "Mauritania",
            "Mauritius": "Mauritius",
            "Mexico": "Meksiko",
            "Micronesia": "Mikronesia",
            "Moldova": "Moldova",
            "Monaco": "Monaco",
            "Mongolia": "Mongolia",
            "Montenegro": "Montenegro",
            "Morocco": "Marokko",
            "Mozambique": "Mosambik",
            "Myanmar (Burma)": "Myanmar",
            "Namibia": "Namibia",
            "Nauru": "Nauru",
            "Nepal": "Nepal",
            "Netherlands": "Alankomaat",
            "New Zealand": "Uusi-Seelanti",
            "Nicaragua": "Nicaragua",
            "Niger": "Niger",
            "Nigeria": "Nigeria",
            "North Korea": "Pohjois-Korea",
            "North Macedonia": "Pohjois-Makedonia",
            "Oman": "Oman",
            "Pakistan": "Pakistan",
            "Palau": "Palau",
            "Panama": "Panama",
            "Papua New Guinea": "Papua-Uusi-Guinea",
            "Paraguay": "Paraguay",
            "Peru": "Peru",
            "Philippines": "Filippiinit",
            "Poland": "Puola",
            "Portugal": "Portugali",
            "Qatar": "Qatar",
            "Romania": "Romania",
            "Russia": "Venäjä",
            "Rwanda": "Ruanda",
            "Saint Kitts and Nevis": "Saint Kitts ja Nevis",
            "Saint Lucia": "Saint Lucia",
            "Saint Vincent and the Grenadines": "Saint Vincent ja Grenadiinit",
            "Samoa": "Samoa",
            "San Marino": "San Marino",
            "São Tomé and Príncipe": "São Tomé ja Príncipe",
            "Saudi Arabia": "Saudi-Arabia",
            "Senegal": "Senegal",
            "Serbia": "Serbia",
            "Seychelles": "Seychellit",
            "Sierra Leone": "Sierra Leone",
            "Singapore": "Singapore",
            "Slovakia": "Slovakia",
            "Slovenia": "Slovenia",
            "Solomon Islands": "Salomonsaaret",
            "Somalia": "Somalia",
            "South Africa": "Etelä-Afrikka",
            "South Korea": "Etelä-Korea",
            "South Sudan": "Etelä-Sudan",
            "Sri Lanka": "Sri Lanka",
            "Sudan": "Sudan",
            "Suriname": "Suriname",
            "Syria": "Syyria",
            "Tajikistan": "Tadžikistan",
            "Tanzania": "Tansania",
            "Thailand": "Thaimaa",
            "Timor-Leste": "Itä-Timor",
            "Togo": "Togo",
            "Tonga": "Tonga",
            "Trinidad and Tobago": "Trinidad ja Tobago",
            "Tunisia": "Tunisia",
            "Turkey": "Turkki",
            "Turkmenistan": "Turkmenistan",
            "Tuvalu": "Tuvalu",
            "Uganda": "Uganda",
            "Ukraine": "Ukraina",
            "United Arab Emirates": "Arabiemiirikunnat",
            "United Kingdom": "Yhdistynyt kuningaskunta",
            "Uruguay": "Uruguay",
            "Uzbekistan": "Uzbekistan",
            "Vanuatu": "Vanuatu",
            "Vatican City": "Vatikaani",
            "Venezuela": "Venezuela",
            "Vietnam": "Vietnam",
            "Yemen": "Jemen",
            "Zambia": "Sambia",
            "Zimbabwe": "Zimbabwe"
        };

        fetch('https://restcountries.com/v3.1/all')
            .then(response => response.json())
            .then(data => {
                countryData = data;
                startQuiz();
            });

        function startQuiz() {
            const randomIndex = Math.floor(Math.random() * countryData.length);
            const country = countryData[randomIndex];
            correctCountry = country.name.common;
            correctCountryInFinnish = countryTranslations[correctCountry] || correctCountry;

            document.getElementById('flag-img').src = country.flags.png;

            document.getElementById('result').innerText = '';
            document.getElementById('country-info').style.display = 'none';
            document.getElementById('country-name').innerText = '';
            document.getElementById('country-input').value = '';
            document.getElementById('score').innerText = `Pisteesi: ${score}`;

            showCarouselImages(correctCountry); 
        }

        function showCarouselImages(countryName) {
            const accessKey = 'kOtx4NsMYxC68f_HJIWSYP4cBTQoZeMzy2-aDFBLO2g';
            const apiUrl = `https://api.unsplash.com/search/photos?query=${countryName}&client_id=${accessKey}`;

            fetch(apiUrl)
                .then(response => response.json())
                .then(data => {
                    const carouselImagesDiv = document.getElementById('carousel-images');
                    carouselImagesDiv.innerHTML = '';

                    if (data.results.length > 0) {
                        data.results.forEach((img, index) => {
                            const isActive = index === 0 ? 'active' : '';
                            const imgElement = `
                                <div class="carousel-item ${isActive}">
                                    <img src="${img.urls.regular}" class="d-block w-100" alt="Kuva ${countryName} maasta">
                                </div>
                            `;
                            carouselImagesDiv.innerHTML += imgElement;
                        });
                    } else {
                        carouselImagesDiv.innerHTML = `
                            <div class="carousel-item active">
                                <img src="https://via.placeholder.com/800x400?text=Ei+kuvia+%E2%80%93+Kuvia+ei+ole saatavilla" class="d-block w-100" alt="Ei kuvia">
                            </div>
                        `;
                    }
                })
                .catch(error => {
                    console.error('Virhe haettaessa kuvia:', error);
                });
        }

        document.getElementById('submit-btn').addEventListener('click', () => {
            const userInput = document.getElementById('country-input').value.trim();
            if (userInput.toLowerCase() === correctCountryInFinnish.toLowerCase()) {
                document.getElementById('result').innerText = 'Oikein!';
                score++;
                document.getElementById('score').innerText = `Pisteesi: ${score}`;

                const currentCountry = countryData.find(country => country.name.common === correctCountry);
                showCountryInfo(currentCountry); 
            } else {
                document.getElementById('result').innerText = `Väärin! Oikea vastaus on ${correctCountryInFinnish}.`;
            }
        });

        document.getElementById('dont-know-btn').addEventListener('click', () => {
            document.getElementById('result').innerText = `Oikea vastaus on ${correctCountryInFinnish}.`;
            const currentCountry = countryData.find(country => country.name.common === correctCountry);
            showCountryInfo(currentCountry); 
        });

        document.getElementById('new-flag-btn').addEventListener('click', () => {
            startQuiz();
        });

        function showCountryInfo(country) {
            const countryInfoDiv = document.getElementById('country-info');
            const countryDetails = document.getElementById('country-details');

            countryDetails.innerHTML = `
                <li><strong>Maa:</strong> ${correctCountryInFinnish}</li>
                <li><strong>Alue:</strong> ${country.region}</li>
                <li><strong>Alueen osa:</strong> ${country.subregion}</li>
                <li><strong>Väkiluku:</strong> ${country.population.toLocaleString()}</li>
                <li><strong>Valuutta:</strong> ${Object.values(country.currencies)[0].name} (${Object.keys(country.currencies)[0]})</li>
            `;

            countryInfoDiv.style.display = 'block';
            showMap(country);
        }

        function showMap(country) {
            const lat = country.latlng[0];
            const lng = country.latlng[1];
            const map = new google.maps.Map(document.getElementById('map'), {
                zoom: 5,
                center: { lat, lng }
            });

            new google.maps.Marker({
                position: { lat, lng },
                map: map
            });
        }
    </script>
        
                    </div>
                </div>
            </div>
        </div>

        <!-- Sää-->

        
        <section class="page-section bg-primary" id="sää">
            <h1>Hae säätiedot kaupungille</h1>
    <form id="weatherForm">
        <input type="text" id="cityInput" placeholder="Kaupunki" required>
        <input type="submit" value="Hae säätiedot">
    </form>

    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #80785ffb;
        }
        h1 {
            text-align: center;
            color: #0a0909;
        }
        form {
            text-align: center;
            margin-bottom: 20px;
        }
        input[type="text"] {
            padding: 10px;
            font-size: 16px;
            width: 1200px;
            align-content: center;
            
          
        
        
        
    </style>

    <div id="weatherContainer" class="weatherContainer"></div>

    <script>
        const apiKey = '314de1b8dabfbace7321a5ff474e27d1'; // Aseta oma OpenWeatherMap API-avain tähän
        const unsplashAccessKey = 'kOtx4NsMYxC68f_HJIWSYP4cBTQoZeMzy2-aDFBLO2g'; // Aseta oma Unsplash API-avain tähän

        document.getElementById('weatherForm').addEventListener('submit', function(event) {
            event.preventDefault();
            const city = document.getElementById('cityInput').value.trim();
            fetchWeather(city);
        });

        function fetchWeather(city) {
            const url = `https://api.openweathermap.org/data/2.5/weather?q=${city}&units=metric&appid=${apiKey}&lang=fi`;

            fetch(url)
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Tietoja ei löytynyt.');
                    }
                    return response.json();
                })
                .then(data => {
                    const countryName = getCountryName(data.sys.country);
                    displayWeather(data, countryName);
                    fetchImage(data.name); // Hae kuva kaupungin mukaan
                })
                .catch(error => {
                    document.getElementById("weatherContainer").innerHTML = 
                    "<p>Tietoa ei pystytä hakemaan. Tarkista kaupunki ja yritä uudelleen.</p>";
                });
        }

        function getCountryName(countryCode) {
            const countryNames = {
                "FI": "Suomi",
                "SE": "Ruotsi",
                "NO": "Norja",
                "DE": "Saksa",
                "FR": "Ranska",
                "US": "Yhdysvallat",
                "GB": "Iso-Britannia",
                "JP": "Japani",
                "CN": "Kiina",
                
            };
            return countryNames[countryCode] || countryCode; 
        }

        function displayWeather(data, countryName) {
            let teksti = `<div class='weatherItem'>
                            <div class='imageContainer'>
                                <img src='http://openweathermap.org/img/w/${data.weather[0].icon}.png' alt='sääkuva'>
                            </div>
                            <div class='weatherInfo'>
                                <h5>Maa: ${countryName}</h5>
                                <p>Kaupunki: ${data.name}</p>
                                <p>Kuvaus: ${data.weather[0].description}</p>
                                <p>Lämpötila: ${data.main.temp} &deg;C</p>
                                <p>Tuulen nopeus: ${data.wind.speed} m/s</p>
                            </div>
                          </div>`;
            document.getElementById("weatherContainer").innerHTML = teksti; // Tyhjennetään aiemmat tulokset
        }

        function fetchImage(cityName) {
            // Haetaan kuva Unsplashista
            const url = `https://api.unsplash.com/search/photos?query=${cityName}&client_id=${unsplashAccessKey}`;

            fetch(url)
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Kuvaa ei löytynyt.');
                    }
                    return response.json();
                })
                .then(data => {
                    const imageUrl = data.results.length > 0 ? data.results[0].urls.regular : 'https://via.placeholder.com/300x200?text=Kuva+ei+loydy';
                    document.querySelector('.imageContainer img').src = imageUrl; // Päivitetään kuva
                })
                .catch(error => {
                    console.error(error);
                });
        }
    </script>
        </section>
        
        
        <!-- Footer-->
        <footer class="bg-light py-5">
            <div class="container px-4 px-lg-5"><div class="small text-center text-muted">Copyright &copy; 2024 - Jani Rehnman</div></div>

           
        </footer>
        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js"></script>
        <!-- SimpleLightbox plugin JS-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/SimpleLightbox/2.1.0/simpleLightbox.min.js"></script>
        <!-- Core theme JS-->
        <script src="js/scripts.js"></script>
        <!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *-->
        <!-- * *                               SB Forms JS                               * *-->
        <!-- * * Activate your form at https://startbootstrap.com/solution/contact-forms * *-->
        <!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *-->
        <script src="https://cdn.startbootstrap.com/sb-forms-latest.js"></script>
    </body>
</html>
